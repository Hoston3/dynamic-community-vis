!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("d3")):"function"==typeof define&&define.amd?define(["d3"],e):"object"==typeof exports?exports.eventDrops=e(require("d3")):t.eventDrops=e(t.d3)}(this,function(t){return function(t){function e(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return t[r].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){n(12),t.exports=n(18)},function(e,n){e.exports=t},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var a=n(1),o=r(a),u={lineHeight:40,start:new Date(0),end:new Date,minScale:0,maxScale:1/0,margin:{top:60,left:200,bottom:40,right:50},labelsWidth:210,labelsRightMargin:10,locale:null,axisFormat:null,tickFormat:[[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!==t.getDate()}],["%b %d",function(t){return 1!==t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",function(){return!0}]],mouseout:function(){},mouseover:function(){},zoomend:function(){},click:function(){},hasDelimiter:!0,date:function(t){return t},hasTopAxis:!0,hasBottomAxis:function(t){return t.length>=10},eventLineColor:"black",eventColor:null,metaballs:!0,zoomable:!0,events:[],dropSize:function(t){return 5}};u.dateFormat=u.locale?u.locale.timeFormat("%d %B %Y"):o["default"].time.format("%d %B %Y"),t.exports=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(15),o=r(a),u=function(t,e){return"function"==typeof t?t(e):t};e["default"]=function(t,e,n,r){return function(a){var i=function(a){var u=t.selectAll(".x-axis."+a).data([{}]);u.enter().append("g").classed("x-axis",!0).classed(a,!0).call(o["default"](e.x,n,a)).attr("transform","translate(0,"+("bottom"===a?r.height:0)+")"),u.call(o["default"](e.x,n,a)),u.exit().remove()};u(n.hasTopAxis,a)&&i("top"),u(n.hasBottomAxis,a)&&i("bottom")}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t,e,n){return function(r){var a=function(t){var a=r[t.idx].data.filter(function(e){return e.step==t.data.step-1}),o=t.data;return a.length>0&&(o=a[0]),e.x(n.date(o))},o=[];r.forEach(function(t,e){return t.data.forEach(function(t){return o.push({idx:e,data:t})})});var u=t.selectAll(".continuation-line").data(o);u.attr("x1",a),u.attr("x2",function(t){return e.x(n.date(t.data))}),u.enter().append("line").classed("continuation-line",!0).attr("x1",a).attr("y1",function(t){return n.lineHeight/2}).attr("x2",function(t){return e.x(n.date(t.data))}).attr("y2",function(t){return n.lineHeight/2}).attr("stroke",function(t){return n.eventColor(t.data)}).attr("transform",function(t){return"translate(0, "+e.y(t.idx)+")"}),u.exit().remove()}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.delimiters=function(t,e,n,r){var a=t.select(".extremum");a.selectAll(".minimum").remove(),a.selectAll(".maximum").remove();var o=e.x.domain();a.append("text").text(r(o[0])).classed("minimum",!0),a.append("text").text(r(o[1])).classed("maximum",!0).attr("transform","translate("+(e.x.range()[1]-n)+")").attr("text-anchor","end")}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t,e,n){return function(r){var a=t.selectAll(".drop-line").data(r);a.enter().append("g").classed("drop-line",!0).attr("transform",function(t,n){return"translate(0, "+e.y(n)+")"}).attr("fill",n.eventLineColor),a.each(function(t){var r=d3.select(this).selectAll(".drop").data(t.data);r.attr("cx",function(t){return e.x(n.date(t))});var a=r.enter().append("circle").classed("drop",!0).attr("r",n.dropSize).attr("cx",function(t){return e.x(n.date(t))}).attr("cy",n.lineHeight/2).attr("fill",n.eventColor);a.on("click",n.click),a.on("mouseover",n.mouseover),a.on("mouseout",n.mouseout),r.exit().on("click",null).on("mouseout",null).on("mouseover",null).remove()}),a.exit().remove()}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t,e,n){return function(r,a,o){var u={};r.forEach(function(t,e){return u[t.name]=e});var i=function(t){return e.y(u[t.name])+n.lineHeight/2},l=t.selectAll("."+o+"-event-line").data(a);l.attr("x1",function(t){return e.x(n.date(t.source))}),l.attr("x2",function(t){return e.x(n.date(t.target))}),l.enter().append("line").classed(o+"-event-line",!0).attr("stroke-dasharray","10, 5").attr("x1",function(t){return e.x(n.date(t.source))}).attr("y1",function(t){return i(t.source)}).attr("x2",function(t){return e.x(n.date(t.target))}).attr("y2",function(t){return i(t.target)}),l.exit().remove()}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(5),o=n(14),u=n(3),i=r(u),l=n(11),c=r(l),s=n(7),d=r(s),f=n(4),p=r(f),m=n(6),v=r(m),x=n(9),h=r(x),g=n(10),b=r(g);e["default"]=function(t,e,n,r){var u=t.append("defs");u.append("clipPath").attr("id","drops-container-clipper").append("rect").attr("id","drops-container-rect").attr("width",e.width).attr("height",e.height+r.margin.top+r.margin.bottom);var l=t.append("g").classed("labels",!0).attr("transform","translate(0, "+r.lineHeight+")"),s=t.append("g").attr({"class":"chart-wrapper",transform:"translate("+(r.labelsWidth+r.labelsRightMargin)+", 55)"}),f=s.append("g").classed("axes",!0),m=s.append("g").classed("event-lines-container",!0).attr("clip-path","url(#drops-container-clipper)"),x=s.append("g").classed("continuation-lines-container",!0).attr("clip-path","url(#drops-container-clipper)"),g=s.append("g").classed("drops-container",!0).attr("clip-path","url(#drops-container-clipper)").style("filter","url(#metaballs)");s.append("g").classed("extremum",!0).attr("width",e.width).attr("height",30).attr("transform","translate(0, -35)"),r.metaballs&&o.metaballs(u);var y=b["default"](f,n,r,e),_=i["default"](f,n,r,e),M=h["default"](l,n,r),j=c["default"](m,n,r),w=d["default"](m,n,r),A=p["default"](x,n,r),O=v["default"](g,n,r);return function(e){y(e),a.delimiters(t,n,r.labelsWidth+r.labelsRightMargin,r.dateFormat),j(e,r.events.expansions,"growth"),j(e,r.events.contractions,"reduction"),w(e,r.events.splits,"split"),w(e,r.events.merges,"merge"),A(e),O(e),M(e,r),_(e)}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(13),o=r(a);e["default"]=function(t,e,n){return function(r){var a=t.selectAll(".label").data(r),u=function(t){var r=o["default"](t.data,e.x,n.date).length;return t.name+(r>0?" ("+r+")":"")};a.text(u),a.enter().append("text").classed("label",!0).attr("x",n.labelsWidth).attr("transform",function(t,n){return"translate(0, "+(40+e.y(n))+")"}).attr("text-anchor","end").text(u),a.exit().remove()}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t,e,n,r){return function(a){var o=t.selectAll(".line-separator").data(a);o.enter().append("g").classed("line-separator",!0).attr("transform",function(t,r){return"translate(0, "+(e.y(r)+n.lineHeight)+")"}).append("line").attr("x1",0).attr("x2",r.width),o.exit().remove()}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t,e,n){return function(r,a,o){var u={};r.forEach(function(t,e){return u[t.name]=e});var i=function(t){return e.y(u[t.name])+n.lineHeight/4},l=t.selectAll("."+o+"-event-line").data(a);l.attr("x1",function(t){return e.x(n.date(t.source))}),l.attr("x2",function(t){return e.x(n.date(t.target))}),l.enter().append("line").classed(o+"-event-line",!0).attr("x1",function(t){return e.x(n.date(t.source))}).attr("y1",function(t){return i(t.source)}).attr("x2",function(t){return e.x(n.date(t.target))}).attr("y2",function(t){return i(t.target)}),l.exit().remove()}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(){function t(t){t.each(function(e){i["default"].select(this).select(".event-drops-chart").remove();var o={width:this.clientWidth,height:e.length*n.lineHeight},u={x:a(o.width,[n.start,n.end]),y:r(e)},l=i["default"].select(this).append("svg").classed("event-drops-chart",!0).attr({width:o.width,height:o.height+n.margin.top+n.margin.bottom}),c=p["default"](l,o,u,n).bind(t);c(e),n.zoomable&&v["default"](i["default"].select(this),o,u,n,e,c)})}var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=o({},d["default"],e),r=function(t){var e=i["default"].scale.ordinal();return e.domain(t.map(function(t){return t.name})).range(t.map(function(t,e){return e*n.lineHeight}))},a=function(t,e){return i["default"].time.scale().range([0,t]).domain(e)};return c["default"](t,n),t}var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u=n(1),i=r(u),l=n(17),c=r(l),s=n(2),d=r(s),f=n(8),p=r(f),m=n(16),v=r(m);i["default"].chart=i["default"].chart||{},i["default"].chart.eventDrops=a,t.exports=a},function(t,e){"use strict";function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1],n=arguments[2],a=e.domain(),o=r(a,2),u=o[0],i=o[1];return t.filter(function(t){return n(t)>=u&&n(t)<=i})}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){var n=[],r=!0,a=!1,o=void 0;try{for(var u,i=t[Symbol.iterator]();!(r=(u=i.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(l){a=!0,o=l}finally{try{!r&&i["return"]&&i["return"]()}finally{if(a)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e["default"]=n},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.metaballs=function(t){var e=t.append("filter");return e.attr("id","metaballs"),e.append("feGaussianBlur").attr("in","SourceGraphic").attr("stdDeviation",10).attr("result","blur"),e.append("feColorMatrix").attr("in","blur").attr("mode","matrix").attr("values","1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 50 -10").attr("result","contrast"),e.append("feBlend").attr("in","SourceGraphic").attr("in2","contrast"),e}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t,e,n){var r=e.tickFormat.map(function(t){return t.slice(0)}),a=e.locale?e.locale.timeFormat.multi(r):o["default"].time.format.multi(r),u=o["default"].svg.axis().scale(t).orient(n).tickFormat(a);return"function"==typeof e.axisFormat&&e.axisFormat(u),u};var a=n(1),o=r(a)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),o=r(a);e["default"]=function(t,e,n,r,a,u){var i=o["default"].behavior.zoom().size([e.width,e.height]).scaleExtent([r.minScale,r.maxScale]).x(n.x).on("zoom",function(){requestAnimationFrame(function(){return u(a)})});return i.on("zoomend",r.zoomend),t.call(i)}},function(t,e,n){"use strict";function r(t,e){function n(n){return function(r){return arguments.length?(e[n]=r,t):e[n]}}for(var r in e)t[r]=n(r)}t.exports=r},function(t,e){}])});
//# sourceMappingURL=eventDrops.js.map